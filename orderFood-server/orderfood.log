[2026-01-16T03:20:04.892Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T03:20:04.893Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T03:20:04.893Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T03:20:04.893Z] [INFO ] ========================================
[2026-01-16T03:20:04.894Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T03:20:04.895Z] [INFO ] ========================================
[2026-01-16T03:20:04.895Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T03:20:06.033Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T03:20:06.034Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T03:20:06.035Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T03:20:06.035Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T03:20:06.035Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T03:20:06.036Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T03:20:06.037Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T03:20:06.215Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T03:20:13.420Z] [INFO ] 数据库初始化成功
[2026-01-16T03:20:13.421Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T03:20:13.435Z] [INFO ] 服务器启动成功
{
  "port": 3000,
  "localAddresses": [
    "http://localhost:3000",
    "http://127.0.0.1:3000"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3000"
  ]
}
[2026-01-16T03:22:52.233Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T03:22:52.234Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T03:22:52.234Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T03:22:52.235Z] [INFO ] ========================================
[2026-01-16T03:22:52.235Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T03:22:52.235Z] [INFO ] ========================================
[2026-01-16T03:22:52.235Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T03:22:52.297Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T03:22:52.297Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T03:22:52.298Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T03:22:52.299Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T03:22:52.299Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T03:22:52.300Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T03:22:52.300Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T03:22:52.303Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T03:22:52.476Z] [INFO ] 数据库初始化成功
[2026-01-16T03:22:52.477Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T03:22:52.487Z] [ERROR] 端口 3000 已被占用
错误信息: listen EADDRINUSE: address already in use 0.0.0.0:3000
错误堆栈: Error: listen EADDRINUSE: address already in use 0.0.0.0:3000
    at Server.setupListenHandle [as _listen2] (node:net:1817:16)
    at listenInCluster (node:net:1865:12)
    at doListen (node:net:2014:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:83:21)
[2026-01-16T03:25:42.322Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T03:25:42.323Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T03:25:42.323Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T03:25:42.324Z] [INFO ] ========================================
[2026-01-16T03:25:42.324Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T03:25:42.324Z] [INFO ] ========================================
[2026-01-16T03:25:42.324Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T03:25:42.383Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T03:25:42.384Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T03:25:42.384Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T03:25:42.384Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T03:25:42.385Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T03:25:42.385Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T03:25:42.386Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T03:25:42.389Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T03:25:42.565Z] [INFO ] 数据库初始化成功
[2026-01-16T03:25:42.566Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T03:25:42.576Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T03:57:27.722Z] [INFO ] 订单已保存到数据库
{
  "orderNumber": "OF35847684"
}
[2026-01-16T03:57:27.722Z] [INFO ] 订单创建成功并已打印小票
{
  "orderNumber": "OF35847684",
  "mealType": "两菜套餐",
  "price": 25
}
[2026-01-16T04:16:22.169Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:16:22.170Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:16:22.171Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:16:22.172Z] [INFO ] ========================================
[2026-01-16T04:16:22.172Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:16:22.172Z] [INFO ] ========================================
[2026-01-16T04:16:22.173Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:16:22.275Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:16:22.276Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:16:22.276Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:16:22.276Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:16:22.277Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:16:22.277Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:16:22.278Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:16:22.281Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:16:22.504Z] [INFO ] 数据库初始化成功
[2026-01-16T04:16:22.504Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:16:22.519Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:16:26.822Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:16:26.823Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:16:26.824Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:16:26.824Z] [INFO ] ========================================
[2026-01-16T04:16:26.824Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:16:26.825Z] [INFO ] ========================================
[2026-01-16T04:16:26.825Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:16:26.893Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:16:26.894Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:16:26.895Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:16:26.895Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:16:26.896Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:16:26.897Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:16:26.897Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:16:26.902Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:16:27.126Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:31:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:43:5)
[2026-01-16T04:16:27.132Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:16:27.145Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:16:32.436Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:16:32.437Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:16:32.438Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:16:32.438Z] [INFO ] ========================================
[2026-01-16T04:16:32.438Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:16:32.438Z] [INFO ] ========================================
[2026-01-16T04:16:32.439Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:16:32.516Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:16:32.517Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:16:32.517Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:16:32.518Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:16:32.519Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:16:32.520Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:16:32.520Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:16:32.523Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:16:32.757Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:31:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:43:5)
[2026-01-16T04:16:32.757Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:16:32.771Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:16:40.878Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:16:40.879Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:16:40.880Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:16:40.881Z] [INFO ] ========================================
[2026-01-16T04:16:40.881Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:16:40.881Z] [INFO ] ========================================
[2026-01-16T04:16:40.882Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:16:40.945Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:16:40.946Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:16:40.946Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:16:40.947Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:16:40.948Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:16:40.948Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:16:40.949Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:16:40.953Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:16:41.245Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:31:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:43:5)
[2026-01-16T04:16:41.247Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:16:41.260Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:17:14.246Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:17:14.248Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:17:14.249Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:17:14.250Z] [INFO ] ========================================
[2026-01-16T04:17:14.251Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:17:14.252Z] [INFO ] ========================================
[2026-01-16T04:17:14.253Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:17:14.389Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:17:14.390Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:17:14.391Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:17:14.391Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:17:14.392Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:17:14.393Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:17:14.395Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:17:14.403Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:17:14.878Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:31:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:43:5)
[2026-01-16T04:17:14.879Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:17:14.907Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:17:20.473Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:17:20.474Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:17:20.475Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:17:20.476Z] [INFO ] ========================================
[2026-01-16T04:17:20.476Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:17:20.478Z] [INFO ] ========================================
[2026-01-16T04:17:20.479Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:17:20.612Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:17:20.613Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:17:20.614Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:17:20.616Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:17:20.617Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:17:20.618Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:17:20.619Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:17:20.624Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:17:21.146Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:31:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:43:5)
[2026-01-16T04:17:21.148Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:17:21.177Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:17:25.162Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:17:25.166Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:17:25.167Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:17:25.168Z] [INFO ] ========================================
[2026-01-16T04:17:25.168Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:17:25.169Z] [INFO ] ========================================
[2026-01-16T04:17:25.170Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:17:25.334Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:17:25.336Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:17:25.337Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:17:25.338Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:17:25.338Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:17:25.339Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:17:25.340Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:17:25.346Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:17:26.025Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:31:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:43:5)
[2026-01-16T04:17:26.027Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:17:26.058Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:17:33.702Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:17:33.704Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:17:33.705Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:17:33.706Z] [INFO ] ========================================
[2026-01-16T04:17:33.707Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:17:33.708Z] [INFO ] ========================================
[2026-01-16T04:17:33.709Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:17:33.830Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:17:33.831Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:17:33.833Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:17:33.834Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:17:33.835Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:17:33.836Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:17:33.836Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:17:33.840Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:17:34.320Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:32:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:44:5)
[2026-01-16T04:17:34.321Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:17:34.348Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:17:35.815Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:17:35.817Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:17:35.818Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:17:35.818Z] [INFO ] ========================================
[2026-01-16T04:17:35.819Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:17:35.820Z] [INFO ] ========================================
[2026-01-16T04:17:35.820Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:17:35.915Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:17:35.916Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:17:35.916Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:17:35.917Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:17:35.917Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:17:35.918Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:17:35.918Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:17:35.922Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:17:36.316Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:32:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:47:5)
[2026-01-16T04:17:36.317Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:17:36.339Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:18:21.817Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:18:21.819Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:18:21.820Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:18:21.821Z] [INFO ] ========================================
[2026-01-16T04:18:21.822Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:18:21.823Z] [INFO ] ========================================
[2026-01-16T04:18:21.824Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:18:21.925Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:18:21.926Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:18:21.928Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:18:21.928Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:18:21.929Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:18:21.930Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:18:21.931Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:18:21.935Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:18:23.541Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:32:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:47:5)
[2026-01-16T04:18:23.542Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:18:23.563Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:18:23.966Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:18:23.968Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:18:23.969Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:18:23.969Z] [INFO ] ========================================
[2026-01-16T04:18:23.971Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:18:23.972Z] [INFO ] ========================================
[2026-01-16T04:18:23.973Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:18:24.075Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:18:24.076Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:18:24.078Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:18:24.078Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:18:24.079Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:18:24.080Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:18:24.082Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:18:24.085Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:18:24.477Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:32:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:47:5)
[2026-01-16T04:18:24.478Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:18:24.504Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:18:36.078Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:18:36.079Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:18:36.080Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:18:36.081Z] [INFO ] ========================================
[2026-01-16T04:18:36.082Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:18:36.082Z] [INFO ] ========================================
[2026-01-16T04:18:36.083Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:18:36.179Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:18:36.180Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:18:36.181Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:18:36.182Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:18:36.183Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:18:36.185Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:18:36.186Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:18:36.189Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:18:36.525Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:32:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:47:5)
[2026-01-16T04:18:36.527Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:18:36.548Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:18:37.074Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:18:37.076Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:18:37.078Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:18:37.078Z] [INFO ] ========================================
[2026-01-16T04:18:37.079Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:18:37.080Z] [INFO ] ========================================
[2026-01-16T04:18:37.081Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:18:37.178Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:18:37.178Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:18:37.179Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:18:37.180Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:18:37.181Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:18:37.183Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:18:37.184Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:18:37.187Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:18:37.521Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:32:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:47:5)
[2026-01-16T04:18:38.213Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:18:38.237Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:18:38.722Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:18:38.723Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:18:38.725Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:18:38.725Z] [INFO ] ========================================
[2026-01-16T04:18:38.727Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:18:38.728Z] [INFO ] ========================================
[2026-01-16T04:18:38.728Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:18:38.832Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:18:38.834Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:18:38.835Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:18:38.836Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:18:38.837Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:18:38.838Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:18:38.839Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:18:38.843Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:18:39.185Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:32:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:47:5)
[2026-01-16T04:18:39.185Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:18:39.207Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:19:05.476Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:19:05.478Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:19:05.479Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:19:05.480Z] [INFO ] ========================================
[2026-01-16T04:19:05.481Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:19:05.482Z] [INFO ] ========================================
[2026-01-16T04:19:05.482Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:19:05.586Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:19:05.587Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:19:05.588Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:19:05.588Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:19:05.589Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:19:05.590Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:19:05.590Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:19:05.594Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:19:05.947Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:32:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:47:5)
[2026-01-16T04:19:06.047Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:19:06.068Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:19:09.023Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:19:09.025Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:19:09.026Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:19:09.026Z] [INFO ] ========================================
[2026-01-16T04:19:09.027Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:19:09.029Z] [INFO ] ========================================
[2026-01-16T04:19:09.030Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:19:09.485Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:19:09.486Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:19:09.488Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:19:09.489Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:19:09.489Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:19:09.491Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:19:09.492Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:19:09.498Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:19:09.849Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: store_id
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:33:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:48:5)
[2026-01-16T04:19:09.850Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:19:09.871Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:19:11.563Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:19:11.564Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:19:11.565Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:19:11.566Z] [INFO ] ========================================
[2026-01-16T04:19:11.566Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:19:11.568Z] [INFO ] ========================================
[2026-01-16T04:19:11.569Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:19:11.672Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:19:11.673Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:19:11.674Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:19:11.675Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:19:11.676Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:19:11.677Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:19:11.678Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:19:11.681Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:19:12.162Z] [INFO ] 数据库连接成功
[2026-01-16T04:19:12.166Z] [INFO ] 检测到旧版本数据库结构，开始迁移...
[2026-01-16T04:19:12.168Z] [INFO ] 已备份 1 条旧订单数据到: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\database-backup-1768537152167.json
[2026-01-16T04:19:12.169Z] [INFO ] 删除旧表结构...
[2026-01-16T04:19:12.188Z] [INFO ] 创建新表结构...
[2026-01-16T04:19:12.689Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:19:12.690Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:19:12.691Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:19:12.691Z] [INFO ] ========================================
[2026-01-16T04:19:12.692Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:19:12.693Z] [INFO ] ========================================
[2026-01-16T04:19:12.694Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:19:12.793Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:19:12.794Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:19:12.796Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:19:12.796Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:19:12.797Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:19:12.798Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:19:12.798Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:19:12.802Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:19:13.150Z] [INFO ] 数据库连接成功
[2026-01-16T04:19:13.310Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:19:13.322Z] [INFO ] 数据库表结构同步成功
[2026-01-16T04:19:13.356Z] [INFO ] 成功初始化 2 条菜品数据
[2026-01-16T04:19:13.358Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:19:13.382Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:19:19.348Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:19:19.350Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:19:19.351Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:19:19.352Z] [INFO ] ========================================
[2026-01-16T04:19:19.352Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:19:19.353Z] [INFO ] ========================================
[2026-01-16T04:19:19.354Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:19:19.459Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:19:19.460Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:19:19.461Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:19:19.462Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:19:19.464Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:19:19.465Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:19:19.465Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:19:19.469Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:19:19.810Z] [INFO ] 数据库连接成功
[2026-01-16T04:19:19.812Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:19:19.823Z] [INFO ] 数据库表结构同步成功
[2026-01-16T04:19:19.828Z] [INFO ] 数据库中已有 2 条菜品记录，跳过初始化
[2026-01-16T04:19:19.829Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:19:19.851Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:29:40.472Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:29:40.473Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:29:40.474Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:29:40.474Z] [INFO ] ========================================
[2026-01-16T04:29:40.474Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:29:40.475Z] [INFO ] ========================================
[2026-01-16T04:29:40.475Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:29:40.543Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:29:40.544Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:29:40.545Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:29:40.545Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:29:40.546Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:29:40.547Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:29:40.547Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:29:40.550Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:29:40.774Z] [INFO ] 数据库连接成功
[2026-01-16T04:29:40.778Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:29:40.785Z] [INFO ] 数据库表结构同步成功
[2026-01-16T04:29:40.789Z] [INFO ] 数据库中已有 2 条菜品记录，跳过初始化
[2026-01-16T04:29:40.790Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:29:40.809Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:29:41.206Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:29:41.207Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:29:41.208Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:29:41.208Z] [INFO ] ========================================
[2026-01-16T04:29:41.208Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:29:41.209Z] [INFO ] ========================================
[2026-01-16T04:29:41.209Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:29:41.273Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:29:41.273Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:29:41.274Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:29:41.274Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:29:41.274Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:29:41.274Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:29:41.275Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:29:41.279Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:29:41.484Z] [INFO ] 数据库连接成功
[2026-01-16T04:29:41.486Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:29:41.491Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:40:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:55:5)
[2026-01-16T04:29:41.492Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:29:41.506Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:29:44.771Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:29:44.772Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:29:44.773Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:29:44.773Z] [INFO ] ========================================
[2026-01-16T04:29:44.773Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:29:44.774Z] [INFO ] ========================================
[2026-01-16T04:29:44.774Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:29:44.837Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:29:44.838Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:29:44.838Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:29:44.838Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:29:44.838Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:29:44.840Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:29:44.840Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:29:44.842Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:29:45.053Z] [INFO ] 数据库连接成功
[2026-01-16T04:29:45.055Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:29:45.061Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:40:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:55:5)
[2026-01-16T04:29:45.061Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:29:45.075Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:29:47.240Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:29:47.241Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:29:47.242Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:29:47.242Z] [INFO ] ========================================
[2026-01-16T04:29:47.242Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:29:47.243Z] [INFO ] ========================================
[2026-01-16T04:29:47.243Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:29:47.309Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:29:47.310Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:29:47.310Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:29:47.311Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:29:47.312Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:29:47.312Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:29:47.313Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:29:47.316Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:29:47.527Z] [INFO ] 数据库连接成功
[2026-01-16T04:29:47.531Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:29:47.537Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:40:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:55:5)
[2026-01-16T04:29:47.537Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:29:47.552Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:29:57.466Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:29:57.467Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:29:57.468Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:29:57.468Z] [INFO ] ========================================
[2026-01-16T04:29:57.469Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:29:57.469Z] [INFO ] ========================================
[2026-01-16T04:29:57.470Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:29:57.549Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:29:57.551Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:29:57.551Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:29:57.551Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:29:57.552Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:29:57.553Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:29:57.553Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:29:57.556Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:29:57.895Z] [INFO ] 数据库连接成功
[2026-01-16T04:29:57.899Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:29:57.907Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:40:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:55:5)
[2026-01-16T04:29:57.908Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:29:57.924Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:36:33.784Z] [INFO ] 收到 SIGINT 信号，正在关闭服务器
[2026-01-16T04:36:38.044Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:36:38.044Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:36:38.045Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:36:38.045Z] [INFO ] ========================================
[2026-01-16T04:36:38.045Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:36:38.046Z] [INFO ] ========================================
[2026-01-16T04:36:38.046Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:36:38.108Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:36:38.109Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:36:38.110Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:36:38.110Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:36:38.111Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:36:38.111Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:36:38.111Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:36:38.114Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:36:38.292Z] [INFO ] 数据库连接成功
[2026-01-16T04:36:38.294Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:36:38.299Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:40:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:55:5)
[2026-01-16T04:36:38.299Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:36:38.311Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:38:34.899Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:38:34.900Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:38:34.902Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:38:34.903Z] [INFO ] ========================================
[2026-01-16T04:38:34.903Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:38:34.904Z] [INFO ] ========================================
[2026-01-16T04:38:34.904Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:38:34.976Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:38:34.976Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:38:34.977Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:38:34.977Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:38:34.978Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:38:34.978Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:38:34.978Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:38:34.984Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:38:35.203Z] [INFO ] 数据库连接成功
[2026-01-16T04:38:35.205Z] [INFO ] 数据库中发现 9 个表: settings, counter_business_last_ticket, business_types, counters, ticket_sequences, counter_displays, meals, orders, order_items
[2026-01-16T04:38:35.205Z] [INFO ] 发现需要删除的表: settings, counter_business_last_ticket, business_types, counters, ticket_sequences, counter_displays
[2026-01-16T04:38:35.218Z] [INFO ] ✓ 已删除表: settings
[2026-01-16T04:38:35.233Z] [INFO ] ✓ 已删除表: counter_business_last_ticket
[2026-01-16T04:38:35.237Z] [WARN ] 删除表 business_types 失败:
SQLITE_CONSTRAINT: FOREIGN KEY constraint failed
[2026-01-16T04:38:35.257Z] [INFO ] ✓ 已删除表: counters
[2026-01-16T04:38:35.272Z] [INFO ] ✓ 已删除表: ticket_sequences
[2026-01-16T04:38:35.289Z] [INFO ] ✓ 已删除表: counter_displays
[2026-01-16T04:38:35.290Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:38:35.296Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:40:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:55:5)
[2026-01-16T04:38:35.297Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:38:35.311Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:40:51.438Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:40:51.439Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:40:51.440Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:40:51.440Z] [INFO ] ========================================
[2026-01-16T04:40:51.440Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:40:51.441Z] [INFO ] ========================================
[2026-01-16T04:40:51.441Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:40:51.510Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:40:51.511Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:40:51.512Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:40:51.512Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:40:51.512Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:40:51.513Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:40:51.514Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:40:51.517Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:40:51.726Z] [INFO ] 数据库连接成功
[2026-01-16T04:40:51.729Z] [INFO ] 数据库中发现 4 个表: business_types, meals, orders, order_items
[2026-01-16T04:40:51.730Z] [INFO ] 发现需要删除的表: business_types
[2026-01-16T04:40:51.746Z] [INFO ] ✓ 已删除表: business_types
[2026-01-16T04:40:51.748Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:40:51.754Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:40:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:55:5)
[2026-01-16T04:40:51.755Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:40:51.769Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:40:55.470Z] [INFO ] 收到 SIGINT 信号，正在关闭服务器
[2026-01-16T04:40:58.805Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:40:58.806Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:40:58.806Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:40:58.806Z] [INFO ] ========================================
[2026-01-16T04:40:58.806Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:40:58.807Z] [INFO ] ========================================
[2026-01-16T04:40:58.807Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:40:58.863Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:40:58.863Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:40:58.863Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:40:58.864Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:40:58.864Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:40:58.865Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:40:58.865Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:40:58.868Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:40:59.046Z] [INFO ] 数据库连接成功
[2026-01-16T04:40:59.047Z] [INFO ] 数据库中发现 3 个表: meals, orders, order_items
[2026-01-16T04:40:59.047Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:40:59.048Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:40:59.054Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:40:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:55:5)
[2026-01-16T04:40:59.054Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:40:59.065Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:44:04.431Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:44:04.434Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:44:04.436Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:44:04.437Z] [INFO ] ========================================
[2026-01-16T04:44:04.438Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:44:04.439Z] [INFO ] ========================================
[2026-01-16T04:44:04.440Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:44:04.576Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:44:04.580Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:44:04.581Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:44:04.582Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:44:04.582Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:44:04.584Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:44:04.585Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:44:04.589Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:44:05.109Z] [INFO ] 数据库连接成功
[2026-01-16T04:44:05.112Z] [INFO ] 数据库中发现 3 个表: meals, orders, order_items
[2026-01-16T04:44:05.113Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:44:05.134Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:44:05.191Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:40:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:55:5)
[2026-01-16T04:44:05.192Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:44:05.260Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:44:07.804Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:44:07.806Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:44:07.807Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:44:07.807Z] [INFO ] ========================================
[2026-01-16T04:44:07.808Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:44:07.809Z] [INFO ] ========================================
[2026-01-16T04:44:07.810Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:44:07.935Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:44:07.936Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:44:07.937Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:44:07.938Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:44:07.938Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:44:07.939Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:44:07.940Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:44:07.946Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:44:08.682Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:44:08.684Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:44:08.685Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:44:08.686Z] [INFO ] ========================================
[2026-01-16T04:44:08.687Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:44:08.687Z] [INFO ] ========================================
[2026-01-16T04:44:08.688Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:44:08.816Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:44:08.817Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:44:08.818Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:44:08.818Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:44:08.819Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:44:08.820Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:44:08.820Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:44:08.825Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:44:09.503Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:44:09.504Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:44:09.505Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:44:09.507Z] [INFO ] ========================================
[2026-01-16T04:44:09.508Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:44:09.509Z] [INFO ] ========================================
[2026-01-16T04:44:09.511Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:44:09.684Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:44:09.685Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:44:09.686Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:44:09.687Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:44:09.687Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:44:09.688Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:44:09.689Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:44:09.694Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:44:10.152Z] [INFO ] 数据库连接成功
[2026-01-16T04:44:10.154Z] [INFO ] 数据库中发现 3 个表: meals, orders, order_items
[2026-01-16T04:44:10.155Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:44:10.157Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:44:10.170Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:40:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:55:5)
[2026-01-16T04:44:10.171Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:44:10.198Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:44:11.733Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:44:11.735Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:44:11.736Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:44:11.736Z] [INFO ] ========================================
[2026-01-16T04:44:11.737Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:44:11.738Z] [INFO ] ========================================
[2026-01-16T04:44:11.739Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:44:11.880Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:44:11.882Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:44:11.883Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:44:11.884Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:44:11.885Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:44:11.887Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:44:11.888Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:44:11.900Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:44:12.405Z] [INFO ] 数据库连接成功
[2026-01-16T04:44:12.407Z] [INFO ] 数据库中发现 3 个表: meals, orders, order_items
[2026-01-16T04:44:12.408Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:44:12.410Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:44:12.425Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:40:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:55:5)
[2026-01-16T04:44:12.426Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:44:12.457Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:44:19.861Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:44:19.863Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:44:19.864Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:44:19.865Z] [INFO ] ========================================
[2026-01-16T04:44:19.867Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:44:19.867Z] [INFO ] ========================================
[2026-01-16T04:44:19.868Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:44:20.008Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:44:20.010Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:44:20.011Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:44:20.012Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:44:20.013Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:44:20.015Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:44:20.016Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:44:20.022Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:44:20.624Z] [INFO ] 数据库连接成功
[2026-01-16T04:44:20.636Z] [INFO ] 数据库中发现 3 个表: meals, orders, order_items
[2026-01-16T04:44:20.638Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:44:20.647Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:44:20.678Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:40:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:55:5)
[2026-01-16T04:44:20.679Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:44:20.714Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:44:23.129Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:44:23.133Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:44:23.134Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:44:23.135Z] [INFO ] ========================================
[2026-01-16T04:44:23.136Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:44:23.137Z] [INFO ] ========================================
[2026-01-16T04:44:23.137Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:44:23.280Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:44:23.282Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:44:23.283Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:44:23.284Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:44:23.285Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:44:23.286Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:44:23.287Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:44:23.292Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:44:24.120Z] [INFO ] 数据库连接成功
[2026-01-16T04:44:24.135Z] [INFO ] 数据库中发现 3 个表: meals, orders, order_items
[2026-01-16T04:44:24.138Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:44:24.156Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:44:24.186Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:41:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:56:5)
[2026-01-16T04:44:24.187Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:44:24.216Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:44:25.656Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:44:25.658Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:44:25.661Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:44:25.662Z] [INFO ] ========================================
[2026-01-16T04:44:25.663Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:44:25.664Z] [INFO ] ========================================
[2026-01-16T04:44:25.665Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:44:25.799Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:44:25.800Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:44:25.801Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:44:25.802Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:44:25.802Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:44:25.803Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:44:25.804Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:44:25.810Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:44:26.327Z] [INFO ] 数据库连接成功
[2026-01-16T04:44:26.331Z] [INFO ] 数据库中发现 3 个表: meals, orders, order_items
[2026-01-16T04:44:26.332Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:44:26.334Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:44:26.348Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:41:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:59:5)
[2026-01-16T04:44:26.349Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:44:26.375Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:44:27.116Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:44:27.118Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:44:27.119Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:44:27.120Z] [INFO ] ========================================
[2026-01-16T04:44:27.121Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:44:27.122Z] [INFO ] ========================================
[2026-01-16T04:44:27.123Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:44:27.277Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:44:27.279Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:44:27.279Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:44:27.280Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:44:27.282Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:44:27.283Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:44:27.284Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:44:27.289Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:44:27.875Z] [INFO ] 数据库连接成功
[2026-01-16T04:44:27.879Z] [INFO ] 数据库中发现 3 个表: meals, orders, order_items
[2026-01-16T04:44:27.880Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:44:27.882Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:44:27.898Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:41:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:59:5)
[2026-01-16T04:44:27.899Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:44:27.929Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:44:30.699Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:44:30.701Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:44:30.703Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:44:30.703Z] [INFO ] ========================================
[2026-01-16T04:44:30.704Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:44:30.705Z] [INFO ] ========================================
[2026-01-16T04:44:30.706Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:44:30.992Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:44:31.002Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:44:31.003Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:44:31.004Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:44:31.009Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:44:31.016Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:44:31.017Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:44:31.026Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:44:31.579Z] [INFO ] 数据库连接成功
[2026-01-16T04:44:31.582Z] [INFO ] 数据库中发现 3 个表: meals, orders, order_items
[2026-01-16T04:44:31.583Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:44:31.585Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:44:31.599Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:41:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:59:5)
[2026-01-16T04:44:31.601Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:44:31.628Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:44:36.922Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:44:36.925Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:44:36.927Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:44:36.928Z] [INFO ] ========================================
[2026-01-16T04:44:36.929Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:44:36.930Z] [INFO ] ========================================
[2026-01-16T04:44:36.931Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:44:37.074Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:44:37.075Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:44:37.076Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:44:37.077Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:44:37.078Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:44:37.081Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:44:37.082Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:44:37.087Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:44:37.801Z] [INFO ] 数据库连接成功
[2026-01-16T04:44:37.804Z] [INFO ] 数据库中发现 3 个表: meals, orders, order_items
[2026-01-16T04:44:37.805Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:44:37.807Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:44:37.822Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:41:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:59:5)
[2026-01-16T04:44:37.824Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:44:37.855Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:47:14.688Z] [INFO ] 收到 SIGINT 信号，正在关闭服务器
[2026-01-16T04:47:18.373Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:47:18.374Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:47:18.375Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:47:18.375Z] [INFO ] ========================================
[2026-01-16T04:47:18.376Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:47:18.376Z] [INFO ] ========================================
[2026-01-16T04:47:18.376Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:47:18.437Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:47:18.438Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:47:18.438Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:47:18.439Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:47:18.439Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:47:18.440Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:47:18.440Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:47:18.442Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:47:18.612Z] [INFO ] 数据库连接成功
[2026-01-16T04:47:18.613Z] [INFO ] 数据库中发现 3 个表: meals, orders, order_items
[2026-01-16T04:47:18.613Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:47:18.614Z] [INFO ] 数据库结构已是最新版本，无需迁移
[2026-01-16T04:47:18.621Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:41:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:59:5)
[2026-01-16T04:47:18.622Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:47:18.633Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:48:39.965Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:48:39.965Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:48:39.966Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:48:39.966Z] [INFO ] ========================================
[2026-01-16T04:48:39.967Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:48:39.967Z] [INFO ] ========================================
[2026-01-16T04:48:39.967Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:48:40.035Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:48:40.036Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:48:40.036Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:48:40.037Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:48:40.037Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:48:40.038Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:48:40.038Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:48:40.041Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:48:40.378Z] [INFO ] 数据库连接成功
[2026-01-16T04:48:40.382Z] [INFO ] 数据库中发现 3 个表: meals, orders, order_items
[2026-01-16T04:48:40.384Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:48:40.389Z] [INFO ] 数据库结构基本正确，但缺少以下表: settings，将创建缺失的表
[2026-01-16T04:48:40.405Z] [ERROR] 数据库迁移失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async migrateDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\scripts\migrateDatabase.js:97:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:35:7)
[2026-01-16T04:48:40.406Z] [WARN ] 数据库迁移检查失败，继续初始化:
SQLITE_ERROR: no such column: order_type
[2026-01-16T04:48:40.415Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:41:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:59:5)
[2026-01-16T04:48:40.416Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:48:40.437Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:48:48.814Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:48:48.816Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:48:48.817Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:48:48.818Z] [INFO ] ========================================
[2026-01-16T04:48:48.818Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:48:48.819Z] [INFO ] ========================================
[2026-01-16T04:48:48.819Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:48:48.894Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:48:48.895Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:48:48.895Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:48:48.896Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:48:48.896Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:48:48.897Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:48:48.897Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:48:48.902Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:48:49.192Z] [INFO ] 数据库连接成功
[2026-01-16T04:48:49.193Z] [INFO ] 数据库中发现 3 个表: meals, orders, order_items
[2026-01-16T04:48:49.194Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:48:49.195Z] [INFO ] 数据库结构基本正确，但缺少以下表: settings，将创建缺失的表
[2026-01-16T04:48:49.206Z] [ERROR] 数据库迁移失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async migrateDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\scripts\migrateDatabase.js:121:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:35:7)
[2026-01-16T04:48:49.207Z] [WARN ] 数据库迁移检查失败，继续初始化:
SQLITE_ERROR: no such column: order_type
[2026-01-16T04:48:49.213Z] [ERROR] 数据库初始化失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:41:5)
    at async startServer (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:59:5)
[2026-01-16T04:48:49.213Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:48:49.229Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:48:49.520Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:48:49.522Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:48:49.522Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:48:49.523Z] [INFO ] ========================================
[2026-01-16T04:48:49.524Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:48:49.524Z] [INFO ] ========================================
[2026-01-16T04:48:49.524Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:48:49.603Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:48:49.603Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:48:49.604Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:48:49.605Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:48:49.606Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:48:49.607Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:48:49.607Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:48:49.612Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:48:49.924Z] [INFO ] 数据库连接成功
[2026-01-16T04:48:49.925Z] [INFO ] 数据库中发现 3 个表: meals, orders, order_items
[2026-01-16T04:48:49.926Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:48:49.928Z] [INFO ] 数据库结构基本正确，但缺少以下表: settings，将创建缺失的表
[2026-01-16T04:48:49.941Z] [ERROR] 数据库迁移失败:
错误信息: SQLITE_ERROR: no such column: order_type
错误堆栈: Error
    at Database.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:185:27)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:50
    at new Promise (<anonymous>)
    at Query.run (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\sqlite\query.js:183:12)
    at C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:315:28
    at async SQLiteQueryInterface.addIndex (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\dialects\abstract\query-interface.js:250:12)
    at async orders.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\model.js:999:7)
    at async Sequelize.sync (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\sequelize\lib\sequelize.js:377:9)
    at async migrateDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\scripts\migrateDatabase.js:121:9)
    at async initDatabase (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\index.js:35:7)
[2026-01-16T04:48:49.942Z] [WARN ] 数据库迁移检查失败，继续初始化:
SQLITE_ERROR: no such column: order_type
[2026-01-16T04:48:52.190Z] [INFO ] 数据库表结构同步成功
[2026-01-16T04:48:52.195Z] [INFO ] 数据库中已有 2 条菜品记录，跳过初始化
[2026-01-16T04:48:52.220Z] [INFO ] 创建设置: store_id = 1
[2026-01-16T04:48:52.245Z] [INFO ] 创建设置: store_name = "默认店铺"
[2026-01-16T04:48:52.265Z] [INFO ] 创建设置: store_address = ""
[2026-01-16T04:48:52.283Z] [INFO ] 创建设置: store_phone = ""
[2026-01-16T04:48:52.301Z] [INFO ] 创建设置: sync_enabled = false
[2026-01-16T04:48:52.317Z] [INFO ] 创建设置: sync_url = ""
[2026-01-16T04:48:52.334Z] [INFO ] 创建设置: sync_interval = 60
[2026-01-16T04:48:52.350Z] [INFO ] 创建设置: sync_api_key = ""
[2026-01-16T04:48:52.368Z] [INFO ] 创建设置: last_sync_time = null
[2026-01-16T04:48:52.368Z] [INFO ] 系统设置初始化完成
[2026-01-16T04:48:52.369Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:48:52.382Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:48:55.904Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:48:55.905Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:48:55.906Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:48:55.906Z] [INFO ] ========================================
[2026-01-16T04:48:55.906Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:48:55.907Z] [INFO ] ========================================
[2026-01-16T04:48:55.907Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:48:55.991Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:48:55.992Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:48:55.992Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:48:55.993Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:48:55.993Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:48:55.994Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:48:55.994Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:48:56.000Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:48:56.240Z] [INFO ] 数据库连接成功
[2026-01-16T04:48:56.242Z] [INFO ] 数据库中发现 4 个表: meals, orders, order_items, settings
[2026-01-16T04:48:56.243Z] [INFO ] settings 表结构正确，保留现有表
[2026-01-16T04:48:56.243Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:48:56.244Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在，检查表结构是否需要更新
[2026-01-16T04:48:56.842Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:48:56.843Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:48:56.844Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:48:56.844Z] [INFO ] ========================================
[2026-01-16T04:48:56.845Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:48:56.846Z] [INFO ] ========================================
[2026-01-16T04:48:56.846Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:48:56.922Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:48:56.923Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:48:56.923Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:48:56.924Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:48:56.924Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:48:56.924Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:48:56.925Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:48:56.927Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:48:57.221Z] [INFO ] 数据库连接成功
[2026-01-16T04:48:57.223Z] [INFO ] 数据库中发现 4 个表: orders, order_items, settings, meals
[2026-01-16T04:48:57.224Z] [INFO ] settings 表结构正确，保留现有表
[2026-01-16T04:48:57.225Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:48:57.226Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在，检查表结构是否需要更新
[2026-01-16T04:48:57.733Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:48:57.735Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:48:57.736Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:48:57.736Z] [INFO ] ========================================
[2026-01-16T04:48:57.737Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:48:57.737Z] [INFO ] ========================================
[2026-01-16T04:48:57.738Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:48:57.836Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:48:57.836Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:48:57.837Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:48:57.837Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:48:57.838Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:48:57.838Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:48:57.840Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:48:57.843Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:48:58.092Z] [INFO ] 数据库连接成功
[2026-01-16T04:48:58.093Z] [INFO ] 数据库中发现 5 个表: orders, order_items, settings, meals, meals_backup
[2026-01-16T04:48:58.094Z] [INFO ] settings 表结构正确，保留现有表
[2026-01-16T04:48:58.095Z] [INFO ] 发现需要删除的表: meals_backup
[2026-01-16T04:48:58.107Z] [INFO ] ✓ 已删除表: meals_backup
[2026-01-16T04:48:58.109Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在，检查表结构是否需要更新
[2026-01-16T04:49:04.483Z] [INFO ] 数据库表结构同步成功
[2026-01-16T04:49:04.486Z] [INFO ] 数据库中已有 2 条菜品记录，跳过初始化
[2026-01-16T04:49:04.504Z] [INFO ] 系统设置初始化完成
[2026-01-16T04:49:04.504Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:49:04.515Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:55:05.352Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:55:05.352Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:55:05.353Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:55:05.354Z] [INFO ] ========================================
[2026-01-16T04:55:05.354Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:55:05.354Z] [INFO ] ========================================
[2026-01-16T04:55:05.355Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:55:05.434Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:55:05.434Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:55:05.435Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:55:05.436Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:55:05.436Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:55:05.437Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:55:05.437Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:55:05.440Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:55:05.675Z] [INFO ] 数据库连接成功
[2026-01-16T04:55:05.676Z] [INFO ] 数据库中发现 4 个表: meals, orders, order_items, settings
[2026-01-16T04:55:05.679Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:55:05.681Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在，检查表结构是否需要更新
[2026-01-16T04:55:08.792Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:55:08.794Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:55:08.796Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:55:08.797Z] [INFO ] ========================================
[2026-01-16T04:55:08.798Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:55:08.799Z] [INFO ] ========================================
[2026-01-16T04:55:08.800Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:55:08.893Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:55:08.895Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:55:08.895Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:55:08.896Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:55:08.896Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:55:08.897Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:55:08.897Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:55:08.901Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:55:09.121Z] [INFO ] 数据库连接成功
[2026-01-16T04:55:09.122Z] [INFO ] 数据库中发现 5 个表: meals, orders, order_items, settings, settings_backup
[2026-01-16T04:55:09.124Z] [INFO ] 发现需要删除的表: settings_backup
[2026-01-16T04:55:09.137Z] [INFO ] ✓ 已删除表: settings_backup
[2026-01-16T04:55:09.139Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:55:11.816Z] [INFO ] 数据库表结构同步成功
[2026-01-16T04:55:11.820Z] [INFO ] 数据库中已有 2 条菜品记录，跳过初始化
[2026-01-16T04:55:11.847Z] [INFO ] 系统设置初始化完成
[2026-01-16T04:55:11.848Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:55:11.865Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:55:42.355Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:55:42.356Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:55:42.357Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:55:42.357Z] [INFO ] ========================================
[2026-01-16T04:55:42.358Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:55:42.358Z] [INFO ] ========================================
[2026-01-16T04:55:42.358Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:55:42.420Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:55:42.421Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:55:42.421Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:55:42.422Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:55:42.423Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:55:42.423Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:55:42.424Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:55:42.426Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:55:42.706Z] [INFO ] 数据库连接成功
[2026-01-16T04:55:42.708Z] [INFO ] 数据库中发现 4 个表: meals, orders, order_items, settings
[2026-01-16T04:55:42.710Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:55:42.713Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:55:45.277Z] [INFO ] 数据库表结构同步成功
[2026-01-16T04:55:45.280Z] [INFO ] 数据库中已有 2 条菜品记录，跳过初始化
[2026-01-16T04:55:45.298Z] [INFO ] 系统设置初始化完成
[2026-01-16T04:55:45.298Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:55:45.309Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:55:57.120Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:55:57.121Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:55:57.121Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:55:57.122Z] [INFO ] ========================================
[2026-01-16T04:55:57.122Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:55:57.123Z] [INFO ] ========================================
[2026-01-16T04:55:57.123Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:55:57.195Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:55:57.195Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:55:57.196Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:55:57.196Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:55:57.196Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:55:57.197Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:55:57.197Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:55:57.203Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:55:57.499Z] [INFO ] 数据库连接成功
[2026-01-16T04:55:57.502Z] [INFO ] 数据库中发现 4 个表: meals, orders, order_items, settings
[2026-01-16T04:55:57.507Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:55:57.511Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:00.195Z] [INFO ] 数据库表结构同步成功
[2026-01-16T04:56:00.199Z] [INFO ] 数据库中已有 2 条菜品记录，跳过初始化
[2026-01-16T04:56:00.222Z] [INFO ] 系统设置初始化完成
[2026-01-16T04:56:00.222Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:56:00.237Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:56:06.357Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:06.358Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:06.359Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:06.359Z] [INFO ] ========================================
[2026-01-16T04:56:06.360Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:06.361Z] [INFO ] ========================================
[2026-01-16T04:56:06.361Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:06.434Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:06.435Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:06.436Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:06.437Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:06.437Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:06.438Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:06.438Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:06.440Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:06.673Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:06.674Z] [INFO ] 数据库中发现 4 个表: meals, orders, order_items, settings
[2026-01-16T04:56:06.677Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:56:06.679Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:07.368Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:07.370Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:07.370Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:07.371Z] [INFO ] ========================================
[2026-01-16T04:56:07.371Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:07.372Z] [INFO ] ========================================
[2026-01-16T04:56:07.372Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:07.441Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:07.442Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:07.442Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:07.442Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:07.443Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:07.444Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:07.445Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:07.449Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:07.683Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:07.964Z] [INFO ] 数据库中发现 5 个表: orders, order_items, settings, meals_backup, meals
[2026-01-16T04:56:07.968Z] [INFO ] 发现需要删除的表: meals_backup
[2026-01-16T04:56:07.994Z] [INFO ] ✓ 已删除表: meals_backup
[2026-01-16T04:56:07.997Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:08.377Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:08.378Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:08.379Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:08.379Z] [INFO ] ========================================
[2026-01-16T04:56:08.379Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:08.381Z] [INFO ] ========================================
[2026-01-16T04:56:08.381Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:08.454Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:08.454Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:08.454Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:08.455Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:08.455Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:08.456Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:08.456Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:08.458Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:08.691Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:08.700Z] [INFO ] 数据库中发现 4 个表: orders, order_items, settings, meals_backup
[2026-01-16T04:56:08.703Z] [INFO ] 发现需要删除的表: meals_backup
[2026-01-16T04:56:08.718Z] [INFO ] ✓ 已删除表: meals_backup
[2026-01-16T04:56:08.721Z] [INFO ] 数据库结构基本正确，但缺少以下表: meals，将创建/更新表结构
[2026-01-16T04:56:10.498Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:10.499Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:10.500Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:10.501Z] [INFO ] ========================================
[2026-01-16T04:56:10.502Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:10.502Z] [INFO ] ========================================
[2026-01-16T04:56:10.503Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:10.573Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:10.574Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:10.575Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:10.575Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:10.576Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:10.576Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:10.577Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:10.580Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:10.817Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:10.845Z] [INFO ] 数据库中发现 6 个表: meals, payment_methods, orders, order_items, settings, settings_backup
[2026-01-16T04:56:10.853Z] [INFO ] 发现需要删除的表: payment_methods, settings_backup
[2026-01-16T04:56:10.878Z] [INFO ] ✓ 已删除表: payment_methods
[2026-01-16T04:56:10.899Z] [INFO ] ✓ 已删除表: settings_backup
[2026-01-16T04:56:10.905Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:14.230Z] [INFO ] 数据库表结构同步成功
[2026-01-16T04:56:14.253Z] [INFO ] 成功初始化 2 条菜品数据
[2026-01-16T04:56:14.276Z] [INFO ] 系统设置初始化完成
[2026-01-16T04:56:14.277Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:56:14.291Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:56:16.474Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:16.475Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:16.475Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:16.476Z] [INFO ] ========================================
[2026-01-16T04:56:16.476Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:16.477Z] [INFO ] ========================================
[2026-01-16T04:56:16.477Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:16.548Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:16.549Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:16.550Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:16.550Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:16.551Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:16.551Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:16.552Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:16.555Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:16.897Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:16.900Z] [INFO ] 数据库中发现 5 个表: meals, payment_methods, orders, order_items, settings
[2026-01-16T04:56:16.904Z] [INFO ] 发现需要删除的表: payment_methods
[2026-01-16T04:56:16.919Z] [INFO ] ✓ 已删除表: payment_methods
[2026-01-16T04:56:16.923Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:19.574Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:19.574Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:19.575Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:19.575Z] [INFO ] ========================================
[2026-01-16T04:56:19.575Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:19.576Z] [INFO ] ========================================
[2026-01-16T04:56:19.577Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:19.650Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:19.650Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:19.651Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:19.651Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:19.651Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:19.652Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:19.652Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:19.654Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:19.889Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:19.891Z] [INFO ] 数据库中发现 6 个表: settings, meals, payment_methods, orders, order_items, settings_backup
[2026-01-16T04:56:19.892Z] [INFO ] 发现需要删除的表: payment_methods, settings_backup
[2026-01-16T04:56:19.906Z] [INFO ] ✓ 已删除表: payment_methods
[2026-01-16T04:56:19.921Z] [INFO ] ✓ 已删除表: settings_backup
[2026-01-16T04:56:19.922Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:22.308Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:22.309Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:22.309Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:22.310Z] [INFO ] ========================================
[2026-01-16T04:56:22.310Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:22.311Z] [INFO ] ========================================
[2026-01-16T04:56:22.312Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:22.381Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:22.382Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:22.383Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:22.383Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:22.384Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:22.384Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:22.385Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:22.388Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:22.621Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:22.635Z] [INFO ] 数据库中发现 6 个表: settings, meals, payment_methods, orders, order_items_backup, order_items
[2026-01-16T04:56:22.638Z] [INFO ] 发现需要删除的表: payment_methods, order_items_backup
[2026-01-16T04:56:22.653Z] [INFO ] ✓ 已删除表: payment_methods
[2026-01-16T04:56:22.668Z] [INFO ] ✓ 已删除表: order_items_backup
[2026-01-16T04:56:22.671Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:24.701Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:24.702Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:24.702Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:24.703Z] [INFO ] ========================================
[2026-01-16T04:56:24.703Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:24.703Z] [INFO ] ========================================
[2026-01-16T04:56:24.704Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:24.772Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:24.773Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:24.773Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:24.774Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:24.774Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:24.775Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:24.775Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:24.778Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:25.007Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:25.009Z] [INFO ] 数据库中发现 4 个表: settings, orders, order_items, meals
[2026-01-16T04:56:25.011Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:56:25.014Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:27.066Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:27.067Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:27.068Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:27.068Z] [INFO ] ========================================
[2026-01-16T04:56:27.068Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:27.069Z] [INFO ] ========================================
[2026-01-16T04:56:27.069Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:27.135Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:27.136Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:27.136Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:27.136Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:27.137Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:27.137Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:27.138Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:27.142Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:27.369Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:27.370Z] [INFO ] 数据库中发现 4 个表: settings, orders, order_items, meals
[2026-01-16T04:56:27.373Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:56:27.376Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:30.431Z] [INFO ] 数据库表结构同步成功
[2026-01-16T04:56:30.433Z] [INFO ] 数据库中已有 2 条菜品记录，跳过初始化
[2026-01-16T04:56:30.455Z] [INFO ] 系统设置初始化完成
[2026-01-16T04:56:30.456Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:56:30.474Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:56:34.486Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:34.487Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:34.488Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:34.488Z] [INFO ] ========================================
[2026-01-16T04:56:34.489Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:34.489Z] [INFO ] ========================================
[2026-01-16T04:56:34.490Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:34.567Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:34.567Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:34.568Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:34.568Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:34.569Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:34.569Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:34.570Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:34.572Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:34.926Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:34.927Z] [INFO ] 数据库中发现 5 个表: meals, payment_methods, orders, order_items, settings
[2026-01-16T04:56:34.929Z] [INFO ] 发现需要删除的表: payment_methods
[2026-01-16T04:56:34.947Z] [INFO ] ✓ 已删除表: payment_methods
[2026-01-16T04:56:34.951Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:37.574Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:37.575Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:37.576Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:37.576Z] [INFO ] ========================================
[2026-01-16T04:56:37.576Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:37.577Z] [INFO ] ========================================
[2026-01-16T04:56:37.577Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:37.647Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:37.648Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:37.649Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:37.649Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:37.650Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:37.650Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:37.650Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:37.653Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:37.890Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:37.892Z] [INFO ] 数据库中发现 6 个表: order_items, settings, meals, payment_methods, orders_backup, orders
[2026-01-16T04:56:37.894Z] [INFO ] 发现需要删除的表: payment_methods, orders_backup
[2026-01-16T04:56:37.908Z] [INFO ] ✓ 已删除表: payment_methods
[2026-01-16T04:56:37.922Z] [INFO ] ✓ 已删除表: orders_backup
[2026-01-16T04:56:37.923Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:38.367Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:38.369Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:38.369Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:38.370Z] [INFO ] ========================================
[2026-01-16T04:56:38.370Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:38.370Z] [INFO ] ========================================
[2026-01-16T04:56:38.371Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:38.439Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:38.439Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:38.440Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:38.440Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:38.440Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:38.441Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:38.441Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:38.444Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:38.672Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:38.695Z] [INFO ] 数据库中发现 5 个表: order_items, settings, orders, meals, meals_backup
[2026-01-16T04:56:38.698Z] [INFO ] 发现需要删除的表: meals_backup
[2026-01-16T04:56:38.716Z] [INFO ] ✓ 已删除表: meals_backup
[2026-01-16T04:56:38.719Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:40.989Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:40.990Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:40.991Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:40.991Z] [INFO ] ========================================
[2026-01-16T04:56:40.991Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:40.992Z] [INFO ] ========================================
[2026-01-16T04:56:40.992Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:41.063Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:41.065Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:41.065Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:41.066Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:41.066Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:41.067Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:41.067Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:41.071Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:41.306Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:41.315Z] [INFO ] 数据库中发现 6 个表: order_items, settings, meals, payment_methods, orders, orders_backup
[2026-01-16T04:56:41.319Z] [INFO ] 发现需要删除的表: payment_methods, orders_backup
[2026-01-16T04:56:41.334Z] [INFO ] ✓ 已删除表: payment_methods
[2026-01-16T04:56:41.350Z] [INFO ] ✓ 已删除表: orders_backup
[2026-01-16T04:56:41.353Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:44.177Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:44.179Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:44.179Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:44.180Z] [INFO ] ========================================
[2026-01-16T04:56:44.181Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:44.181Z] [INFO ] ========================================
[2026-01-16T04:56:44.182Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:44.252Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:44.253Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:44.253Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:44.254Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:44.254Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:44.255Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:44.255Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:44.258Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:44.491Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:44.493Z] [INFO ] 数据库中发现 6 个表: meals, payment_methods, orders, order_items, settings_backup, settings
[2026-01-16T04:56:44.497Z] [INFO ] 发现需要删除的表: payment_methods, settings_backup
[2026-01-16T04:56:44.516Z] [INFO ] ✓ 已删除表: payment_methods
[2026-01-16T04:56:44.538Z] [INFO ] ✓ 已删除表: settings_backup
[2026-01-16T04:56:44.541Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:45.674Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:45.675Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:45.676Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:45.676Z] [INFO ] ========================================
[2026-01-16T04:56:45.677Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:45.677Z] [INFO ] ========================================
[2026-01-16T04:56:45.678Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:45.745Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:45.745Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:45.746Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:45.747Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:45.747Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:45.748Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:45.749Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:45.753Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:45.986Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:45.988Z] [INFO ] 数据库中发现 5 个表: orders, order_items, settings, meals, meals_backup
[2026-01-16T04:56:45.990Z] [INFO ] 发现需要删除的表: meals_backup
[2026-01-16T04:56:46.952Z] [INFO ] ✓ 已删除表: meals_backup
[2026-01-16T04:56:46.955Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:56:47.479Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:47.480Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:47.481Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:47.481Z] [INFO ] ========================================
[2026-01-16T04:56:47.482Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:47.483Z] [INFO ] ========================================
[2026-01-16T04:56:47.484Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:47.553Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:47.553Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:47.554Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:47.554Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:47.555Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:47.555Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:47.555Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:47.558Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:47.791Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:48.617Z] [INFO ] 数据库中发现 5 个表: orders, order_items, settings, meals, meals_backup
[2026-01-16T04:56:48.621Z] [INFO ] 发现需要删除的表: meals_backup
[2026-01-16T04:56:48.645Z] [INFO ] ✓ 已删除表: meals_backup
[2026-01-16T04:56:48.649Z] [INFO ] 数据库结构基本正确，但缺少以下表: payment_methods，将创建/更新表结构
[2026-01-16T04:56:49.198Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:49.199Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:49.200Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:49.200Z] [INFO ] ========================================
[2026-01-16T04:56:49.200Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:49.201Z] [INFO ] ========================================
[2026-01-16T04:56:49.202Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:49.321Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:49.322Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:49.322Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:49.323Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:49.323Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:49.323Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:49.324Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:49.327Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:50.223Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:50.225Z] [INFO ] 数据库中发现 5 个表: orders, order_items, settings, meals_backup, meals
[2026-01-16T04:56:50.229Z] [INFO ] 发现需要删除的表: meals_backup
[2026-01-16T04:56:50.248Z] [INFO ] ✓ 已删除表: meals_backup
[2026-01-16T04:56:50.253Z] [INFO ] 数据库结构基本正确，但缺少以下表: payment_methods，将创建/更新表结构
[2026-01-16T04:56:51.109Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:51.111Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:51.112Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:51.113Z] [INFO ] ========================================
[2026-01-16T04:56:51.113Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:51.114Z] [INFO ] ========================================
[2026-01-16T04:56:51.114Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:51.189Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:51.190Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:51.191Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:51.191Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:51.191Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:51.192Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:51.192Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:51.198Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:51.444Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:52.327Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:52.329Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:52.329Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:52.330Z] [INFO ] ========================================
[2026-01-16T04:56:52.331Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:52.331Z] [INFO ] ========================================
[2026-01-16T04:56:52.332Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:52.405Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:52.405Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:52.405Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:52.406Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:52.406Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:52.407Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:52.407Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:52.409Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:52.647Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:53.190Z] [INFO ] 数据库中发现 5 个表: orders, order_items, settings, meals, meals_backup
[2026-01-16T04:56:53.192Z] [INFO ] 发现需要删除的表: meals_backup
[2026-01-16T04:56:53.207Z] [INFO ] ✓ 已删除表: meals_backup
[2026-01-16T04:56:53.209Z] [INFO ] 数据库结构基本正确，但缺少以下表: payment_methods，将创建/更新表结构
[2026-01-16T04:56:53.679Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:53.681Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:53.681Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:53.682Z] [INFO ] ========================================
[2026-01-16T04:56:53.682Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:53.682Z] [INFO ] ========================================
[2026-01-16T04:56:53.683Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:53.745Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:53.746Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:53.747Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:53.748Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:53.748Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:53.749Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:53.749Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:53.752Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:53.990Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:53.991Z] [INFO ] 数据库中发现 4 个表: orders, order_items, settings, meals_backup
[2026-01-16T04:56:53.994Z] [INFO ] 发现需要删除的表: meals_backup
[2026-01-16T04:56:54.834Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:56:54.835Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:56:54.836Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:56:54.836Z] [INFO ] ========================================
[2026-01-16T04:56:54.836Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:56:54.837Z] [INFO ] ========================================
[2026-01-16T04:56:54.838Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:56:54.908Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:56:54.909Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:56:54.909Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:56:54.910Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:56:54.911Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:56:54.912Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:56:54.912Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:56:54.916Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:56:55.167Z] [INFO ] 数据库连接成功
[2026-01-16T04:56:55.169Z] [INFO ] 数据库中发现 4 个表: orders, order_items, settings, meals_backup
[2026-01-16T04:56:55.171Z] [INFO ] 发现需要删除的表: meals_backup
[2026-01-16T04:56:56.229Z] [INFO ] ✓ 已删除表: meals_backup
[2026-01-16T04:56:56.233Z] [INFO ] 数据库结构基本正确，但缺少以下表: meals, payment_methods，将创建/更新表结构
[2026-01-16T04:56:58.201Z] [INFO ] 成功初始化 2 条菜品数据
[2026-01-16T04:56:58.202Z] [INFO ] 表结构已更新并初始化完成
[2026-01-16T04:57:02.395Z] [INFO ] 数据库表结构同步成功
[2026-01-16T04:57:02.398Z] [INFO ] 数据库中已有 2 条菜品记录，跳过初始化
[2026-01-16T04:57:02.421Z] [INFO ] 系统设置初始化完成
[2026-01-16T04:57:02.436Z] [INFO ] 成功初始化 6 条付款方式数据
[2026-01-16T04:57:02.436Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:57:02.451Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:57:18.925Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:57:18.927Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:57:18.927Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:57:18.929Z] [INFO ] ========================================
[2026-01-16T04:57:18.930Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:57:18.930Z] [INFO ] ========================================
[2026-01-16T04:57:18.930Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:57:19.012Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:57:19.619Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:57:19.620Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:57:19.621Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:57:19.622Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:57:19.623Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:57:19.623Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:57:19.629Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:57:20.034Z] [INFO ] 数据库连接成功
[2026-01-16T04:57:20.037Z] [INFO ] 数据库中发现 5 个表: meals, payment_methods, orders, order_items, settings
[2026-01-16T04:57:20.039Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:57:20.040Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:57:23.593Z] [INFO ] 数据库表结构同步成功
[2026-01-16T04:57:23.598Z] [INFO ] 数据库中已有 2 条菜品记录，跳过初始化
[2026-01-16T04:57:23.626Z] [INFO ] 系统设置初始化完成
[2026-01-16T04:57:23.628Z] [INFO ] 数据库中已有 6 条付款方式记录，跳过初始化
[2026-01-16T04:57:23.629Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:57:23.645Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T04:58:16.776Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T04:58:16.776Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer.config.json
[2026-01-16T04:58:16.777Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T04:58:16.778Z] [INFO ] ========================================
[2026-01-16T04:58:16.778Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T04:58:16.779Z] [INFO ] ========================================
[2026-01-16T04:58:16.779Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T04:58:16.848Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T04:58:16.849Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T04:58:16.849Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T04:58:16.850Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T04:58:16.850Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T04:58:16.851Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T04:58:16.851Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T04:58:16.854Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\queue-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T04:58:17.072Z] [INFO ] 数据库连接成功
[2026-01-16T04:58:17.073Z] [INFO ] 数据库中发现 5 个表: meals, payment_methods, orders, order_items, settings
[2026-01-16T04:58:17.075Z] [INFO ] 没有需要删除的多余表
[2026-01-16T04:58:17.077Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T04:58:21.034Z] [INFO ] 数据库表结构同步成功
[2026-01-16T04:58:21.037Z] [INFO ] 数据库中已有 2 条菜品记录，跳过初始化
[2026-01-16T04:58:21.051Z] [INFO ] 系统设置初始化完成
[2026-01-16T04:58:21.052Z] [INFO ] 数据库中已有 6 条付款方式记录，跳过初始化
[2026-01-16T04:58:21.053Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T04:58:21.066Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T06:10:25.035Z] [INFO ] 收到 SIGINT 信号，正在关闭服务器
[2026-01-16T06:26:43.201Z] [INFO ] ✓ loadPrinterModules 工具函数加载成功
[2026-01-16T06:26:43.202Z] [INFO ] ✓ 已加载打印机配置文件: C:\Users\momo0\Documents\CursorProjects\orderFood-system\orderFood-server\printer.config.json
[2026-01-16T06:26:43.202Z] [INFO ] ℹ️  打印机配置来源: 配置文件
[2026-01-16T06:26:43.203Z] [INFO ] ========================================
[2026-01-16T06:26:43.203Z] [INFO ] 开始初始化打印机服务...
[2026-01-16T06:26:43.203Z] [INFO ] ========================================
[2026-01-16T06:26:43.204Z] [INFO ] 调用 loadPrinterModules()...
[2026-01-16T06:26:43.264Z] [INFO ] loadPrinterModules() 执行完成
[2026-01-16T06:26:43.264Z] [INFO ] ✓ loadPrinterModules() 返回了模块对象
[2026-01-16T06:26:43.265Z] [INFO ] 已加载的模块:
[
  "ffi-napi",
  "ref-napi",
  "ref-struct-napi",
  "ref-array-napi"
]
[2026-01-16T06:26:43.265Z] [INFO ] ✓ ffi-napi 和 ref-napi 加载成功
[2026-01-16T06:26:43.265Z] [INFO ] ✓ wchar_t 类型定义完成
[2026-01-16T06:26:43.266Z] [INFO ] DLL 路径: C:\Users\momo0\Documents\CursorProjects\orderFood-system\orderFood-server\printer_sdk\CsnPrinterLibs.dll
[2026-01-16T06:26:43.266Z] [INFO ] ✓ DLL 文件存在
[2026-01-16T06:26:43.269Z] [ERROR] ❌ 打印机 DLL 加载失败:
错误信息: Cannot read properties of null (reading 'match')
错误堆栈: TypeError: Cannot read properties of null (reading 'match')
    at new DynamicLibrary (C:\Users\momo0\Documents\CursorProjects\orderFood-system\orderFood-server\node_modules\ffi-napi\lib\dynamic_library.js:67:21)
    at Object.Library (C:\Users\momo0\Documents\CursorProjects\orderFood-system\orderFood-server\node_modules\ffi-napi\lib\library.js:47:10)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\orderFood-system\orderFood-server\services\printerService.js:251:22)
    at Module._compile (node:internal/modules/cjs/loader:1364:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
    at Module.load (node:internal/modules/cjs/loader:1203:32)
    at Module._load (node:internal/modules/cjs/loader:1019:12)
    at Module.require (node:internal/modules/cjs/loader:1231:19)
    at require (node:internal/modules/helpers:177:18)
    at Object.<anonymous> (C:\Users\momo0\Documents\CursorProjects\orderFood-system\orderFood-server\services\orderFoodService.js:1:24)
[2026-01-16T06:26:43.450Z] [INFO ] 数据库连接成功
[2026-01-16T06:26:43.451Z] [INFO ] 数据库中发现 5 个表: meals, payment_methods, orders, order_items, settings
[2026-01-16T06:26:43.453Z] [INFO ] 没有需要删除的多余表
[2026-01-16T06:26:43.455Z] [INFO ] 数据库结构已是最新版本，所有必需表都存在且结构正确，跳过同步
[2026-01-16T06:26:46.578Z] [INFO ] 数据库表结构同步成功
[2026-01-16T06:26:46.581Z] [INFO ] 数据库中已有 2 条菜品记录，跳过初始化
[2026-01-16T06:26:46.595Z] [INFO ] 系统设置初始化完成
[2026-01-16T06:26:46.596Z] [INFO ] 数据库中已有 6 条付款方式记录，跳过初始化
[2026-01-16T06:26:46.597Z] [INFO ] ℹ️  打印机功能未启用（DLL未加载或已禁用）
[2026-01-16T06:26:46.612Z] [INFO ] 服务器启动成功
{
  "port": 3002,
  "localAddresses": [
    "http://localhost:3002",
    "http://127.0.0.1:3002"
  ],
  "networkAddresses": [
    "http://10.10.8.70:3002"
  ]
}
[2026-01-16T06:27:06.108Z] [INFO ] 订单已保存到数据库
{
  "orderNumber": "OF44826051",
  "orderId": 1,
  "itemCount": 2
}
[2026-01-16T06:27:06.108Z] [INFO ] 订单创建成功并已打印小票
{
  "orderNumber": "OF44826051",
  "totalAmount": 55,
  "itemCount": 2
}
