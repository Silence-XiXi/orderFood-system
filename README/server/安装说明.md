# 依赖安装说明

## 问题

`ffi-napi`、`ref-napi` 等原生模块需要编译，需要 Visual Studio Build Tools 和 Windows SDK。

## 解决方案：从 queueSystem-server 复制已编译模块

### 快速安装（推荐）

1. **确保 queueSystem-server 已安装依赖：**
   ```powershell
   cd ..\queueSystem-server
   npm install
   ```

2. **安装 orderFood-server 依赖：**
   ```powershell
   cd orderFood-server
   npm install
   ```
   
   安装脚本会自动从 `queueSystem-server` 复制已编译的原生模块。

3. **如果自动复制失败，手动运行：**
   ```powershell
   node install-native-modules.js
   ```

### 验证安装

检查模块是否已复制：

```powershell
# 检查 ffi-napi
Test-Path "node_modules\ffi-napi\prebuilds"

# 检查 sqlite3
Test-Path "node_modules\sqlite3\build\Release\node_sqlite3.node"
```

### 如果 queueSystem-server 也没有编译好的模块

需要安装 Visual Studio Build Tools：

1. **下载：** https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2022
2. **安装时选择：**
   - ✅ C++ 生成工具
   - ✅ Windows 10/11 SDK（最新版本）
3. **然后运行：**
   ```powershell
   npm install
   ```

## 启动服务器

安装完成后：

```powershell
npm start
```

如果看到 "打印机功能未启用（DLL未加载或已禁用）" 是正常的，系统会以模拟模式运行，不影响订单创建功能。
